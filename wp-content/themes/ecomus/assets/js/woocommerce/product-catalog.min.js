(function(u){"use strict";var f=f||{};f.init=function(){f.$body=u(document.body),f.$window=u(window),f.$header=u("#site-header");this.shopHeaderMore();this.topCategories();this.scrollFilterSidebar();this.productsFilterActivated();this.changeCatalogElementsFiltered();this.catalogOrderBy();this.loadMoreProducts()};f.shopHeaderMore=function(){var e=u(document).find(".shop-header__content");e.each(function(){if(jQuery(this)[0].scrollHeight>jQuery(this)[0].clientHeight){jQuery(this).siblings(".shop-header__more").removeClass("hidden")}});u(document.body).on("click",".shop-header__more",function(e){e.preventDefault();var t=u(this).data("settings"),o=t.more,i=t.less;if(u(this).hasClass("less")){u(this).removeClass("less");u(this).text(o);u(this).siblings(".shop-header__content").removeAttr("style")}else{u(this).addClass("less");u(this).text(i);u(this).siblings(".shop-header__content").css("-webkit-line-clamp","inherit")}})};f.topCategories=function(){if(typeof Swiper==="undefined"){return}var e=u(".catalog-top-categories");if(!e.length){return}var t=e.data("settings");var o={observer:true,observeParents:true,loop:false,autoplay:false,watchOverflow:true,spaceBetween:t&&t.column_space&&t.column_space.desktop?parseInt(t.column_space.desktop):30,navigation:{nextEl:e.find(".swiper-button-next").get(0),prevEl:e.find(".swiper-button-prev").get(0)},pagination:{el:e.find(".swiper-pagination").get(0),type:"bullets",clickable:true},breakpoints:{0:{slidesPerView:t&&t.columns&&t.columns.mobile?parseInt(t.columns.mobile):2,slidesPerGroup:t&&t.columns&&t.columns.mobile?parseInt(t.columns.mobile):2,spaceBetween:t&&t.column_space&&t.column_space.mobile?parseInt(t.column_space.mobile):15},700:{slidesPerView:t&&t.columns&&t.columns.tablet?parseInt(t.columns.tablet):3,slidesPerGroup:t&&t.columns&&t.columns.tablet?parseInt(t.columns.tablet):3,spaceBetween:t&&t.column_space&&t.column_space.tablet?parseInt(t.column_space.tablet):30},1200:{slidesPerView:t&&t.columns&&t.columns.desktop?parseInt(t.columns.desktop):5,slidesPerGroup:1,spaceBetween:t&&t.column_space&&t.column_space.desktop?parseInt(t.column_space.desktop):30}}};new Swiper(e.get(0),o)};f.scrollFilterSidebar=function(){f.$body.on("ecomus_products_filter_before_send_request",function(){var e=0;if(!u("#ecomus-shop-content").length){return}if(u(".catalog-toolbar").length){e+=u(".catalog-toolbar").outerHeight()}u("html,body").stop().animate({scrollTop:u("#ecomus-shop-content").offset().top-e},"300",function(){})})};f.productsFilterActivated=function(){var s=u(".catalog-toolbar__filters-actived"),l=u(".catalog-toolbar__active-filters"),i=u(".filter-sidebar-panel"),e=i.find(".products-filter__activated-items"),r='<a href="#" class="remove-filtered remove-filtered-all">'+s.data("clear-text")+"</a>";if(e.html()&&e.html().trim()){s.html("");s.removeClass("active");s.prepend(e.html()+r);s.addClass("active");l.addClass("actived")}f.$body.on("ecomus_products_filter_request_success",function(e,t,o,i){var n=u(t).filter(".filter-sidebar-panel").find(".products-filter__activated-items"),a=u(t).find(".filter-sidebar-panel .products-filter__activated-items");if(n.children().length>0){if(n.html()&&n.html().trim()){s.removeClass("hidden");s.html("");s.removeClass("active");s.prepend(n.html()+r);s.addClass("active");l.addClass("actived")}}else if(a.children().length>0){if(a.html()&&a.html().trim()){s.removeClass("hidden");s.html("");s.removeClass("active");s.prepend(a.html()+r);s.addClass("active");l.addClass("actived")}}else{if(s.hasClass("active")){s.html("");s.removeClass("active");l.removeClass("actived")}}});s.on("click",".remove-filtered:not(.remove-filtered-all)",function(e){var t=u(this).data("value"),o=i.find(".products-filter__activated-items");if(t!=="undefined"){u(this).remove();i.find(".remove-filtered[data-value='"+t+"']").trigger("click")}if(!o.html()||!o.html().trim()){s.html("");s.removeClass("active");l.removeClass("actived")}return false});s.on("click",".remove-filtered-all",function(e){e.preventDefault();i.find(".products-filter__button .reset-button").trigger("click")});u(document.body).on("ecomus_products_filter_reseted",function(){s.html("");s.removeClass("active");l.removeClass("actived");u("#site-content .woocommerce-notices-wrapper").fadeOut()})};f.changeCatalogElementsFiltered=function(){f.$body.on("ecomus_products_filter_before_send_request",function(e,t){u(".filter-sidebar-panel").find(".panel__button-close").trigger("click")});f.$body.on("ecomus_products_filter_request_success",function(e,t){var o=u(t),i=f.$body.find("#page-header"),n=f.$body.find(".catalog-top-categories"),a=f.$body.find(".catalog-toolbar__result-count"),s=f.$body.find(".ecomus-badges-sale__countdown .ecomus-countdown"),l=f.$body.find(".woocommerce-pagination"),r=f.$body.find(".catalog-sidebar"),c=f.$body.find(".ecomus-toolbar-view"),d=f.$body.find(".catalog-toolbar__active-filters"),m=f.$body.find(".woocommerce-info");if(o.find("#page-header").length){i.replaceWith(o.find("#page-header"))}if(o.find(".catalog-top-categories").text().trim().length>0){n.show();n.replaceWith(o.find(".catalog-top-categories"));f.topCategories()}else{n.hide()}if(o.find(".catalog-toolbar__result-count").length){a.replaceWith(o.find(".catalog-toolbar__result-count"))}else{a.find(".count").replaceWith('<span class="count">0</span>')}if(o.find(".ecomus-badges-sale__countdown").length){s.ecomus_countdown()}if(o.find(".woocommerce-pagination").length){l.replaceWith(o.find(".woocommerce-pagination"))}else{l.addClass("hidden")}if(o.find(".catalog-sidebar").length){r.replaceWith(o.find(".catalog-sidebar"))}if(o.find(".ecomus-toolbar-view").length&&c.closest(".elementor-widget-ecomus-archive-product-view").length<1){c.replaceWith(o.find(".ecomus-toolbar-view"))}if(o.find(".em-button-no-products-found").length){m.append(o.find(".em-button-no-products-found"))}d.removeClass("hidden")})};f.catalogOrderBy=function(){var o=u("#mobile-orderby-popover"),i=u(".catalog-toolbar__item .woocommerce-ordering");if(u.fn.select2){i.find("select").select2({width:"auto",minimumResultsForSearch:-1,dropdownCssClass:"products-ordering",dropdownParent:i})}o.find(".mobile-orderby-list").on("click","a",function(e){e.preventDefault();var t=u(this).data("id");o.find(".mobile-orderby-list .selected").removeClass("selected");u(this).addClass("selected");i.find("option:selected").attr("selected",false);i.find("option[value="+t+"]").attr("selected","selected");i.trigger("submit")});var e=i.find("option:selected").val();o.find(".mobile-orderby-list a[data-id="+e+"]").addClass("selected")};f.loadMoreProducts=function(){if(u(".woocommerce-pagination").hasClass("woocommerce-pagination--infinite")){var e=false,t;u(window).on("scroll",function(){if(e){return}e=true;clearTimeout(t);o();setTimeout(function(){e=false},100);t=setTimeout(function(){e=false;o()},200)})}function o(){var t=u(".woocommerce-pagination.woocommerce-pagination--ajax"),o=u(".woocommerce-pagination-button",t);if(f.isVisible(t)&&o.length&&!o.hasClass("loading")){o.addClass("loading");n(o,function(e){o=t.find(".woocommerce-pagination-button")})}}if(u(".woocommerce-pagination").hasClass("woocommerce-pagination--loadmore")){f.$body.on("click",".woocommerce-pagination.woocommerce-pagination--loadmore .woocommerce-pagination-button",function(e){e.preventDefault();i()})}function i(){var t=u(".woocommerce-pagination.woocommerce-pagination--ajax"),o=u(".woocommerce-pagination-button",t);if(f.isVisible(t)&&o.length&&!o.hasClass("loading")){o.addClass("loading");n(o,function(e){o=t.find(".woocommerce-pagination-button")})}}function n(s,l){var r=s.closest(".woocommerce-pagination"),c=s.attr("href");u.get(c,function(e){var t=u(".ecomus-shop-content",e),o=u("ul.products",t),i=o.children(),n=u(".woocommerce-pagination.woocommerce-pagination--ajax",t);i.addClass("em-fadeinup em-animated");let a=.5;i.each(function(e,t){jQuery(t).css("--em-fadeinup-delay",a+"s");a=a+.1});i.appendTo(r.parent().find("ul.products"));if(n.length){s.replaceWith(u("a",n))}else{r.fadeOut(function(){r.remove()})}if("function"===typeof l){l(e)}f.$body.trigger("ecomus_products_loaded",[i,true]);if(i.hasClass("em-animated")){setTimeout(function(){i.removeClass("em-animated")},10)}s.removeClass("loading");if(ecomusData.shop_nav_ajax_url_change){window.history.pushState(null,"",c)}})}};f.isVisible=function(e){if(e instanceof jQuery){e=e[0]}if(!e){return false}var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)};u(function(){f.init()})})(jQuery);